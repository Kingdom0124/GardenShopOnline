!function(){"use strict";window.addEventListener("load",(function(){var e=document.getElementsByClassName("needs-validation");Array.prototype.filter.call(e,(function(e){e.addEventListener("submit",(function(t){!1===e.checkValidity()&&(t.preventDefault(),t.stopPropagation(),e.classList.remove("was-validated")),e.classList.add("was-validated")}),!1)}))}),!1)}(),$(document).ready((function(){var e=document.getElementsByClassName("needs-validation");Array.prototype.filter.call(e,(function(e){$("#submit_edit_product").on("click",(function(){!1===e.checkValidity()?(event.preventDefault(),event.stopPropagation(),e.classList.remove("was-validated")):Update_Product(),e.classList.add("was-validated")})),$("#submit_reason").on("click",(function(){!1===e.checkValidity()?(event.preventDefault(),event.stopPropagation(),e.classList.remove("was-validated")):DeleteOrder(),e.classList.add("was-validated")}))}),!1)})),$(".CGForm").submit((function(e){var t=$(this);if(t[0].checkValidity()){e.preventDefault();var a=t.attr("action");$.ajax({url:a,type:"POST",data:t.serialize(),success:function(e){$(".modal").modal("hide"),e.status?(GetList_CategoryAndType(),sweetAlert({title:"Success !",text:e.message,type:"success"}),t[0].reset(),t.removeClass("was-validated")):swal({title:"Error !",text:e.message,type:"error"})}})}}));var URLDelete="";function Contains(e,t){if(-1!=e.indexOf(t))return!0}function deleteAlert(e,t){swal({title:"Are you sure you want to delete ?",type:"warning",showCancelButton:!0,closeOnConfirm:!1,confirmButtonText:"Yes",confirmButtonColor:"#ec6c62"},(function(){var a={};a.ID=e,$.ajax({url:URLDelete,data:JSON.stringify(a),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json"}).done((function(e){1==e.status?sweetAlert({title:"Delete successfully",confirmButtonText:"OK",type:"success"},(function(){$("table tbody").find('input[name="record"]').each((function(){Contains($(this).val(),t)&&$(this).parents("tr").remove()}))})):sweetAlert({title:"Delete failed !",confirmButtonText:"OK",type:"error"})}))}))}$("#URLDelete").keypress((function(){URLDelete=$(this).val()})).keypress();var URDEditStatus="";function EditStatus(e){console.log(URDEditStatus),sweetAlert({title:"Status update successful!",confirmButtonText:"OK",type:"success"},(function(){var t={};t.id=e,$.ajax({url:URDEditStatus,data:JSON.stringify(t),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json"})}))}function GetCategory(e,t){row=$(e).closest("tr"),$.ajax({type:"POST",url:URLFindCategory,data:{category_id:t},success:function(e){$("#edit_id").val(e.ID),$("#Edit_name").val(e.Name),$("#Edit_Modal .close").css("display","none"),$("#Edit_Modal").modal("show")}})}function GetList_CategoryAndType(){$.ajax({url:URL_List,data:{}}).done((function(e){$("#dataContainer").html(e),$("#example").DataTable()})).fail((function(e,t,a){console.log(t),console.log(a),alert("Something Went Wrong, Try Later")}))}$("#URDEditStatus").keypress((function(){URDEditStatus=$(this).val()})).keypress(),$(".productPrice").keydown((function(e){setTimeout((()=>{let e=$(this).val().split("."),t=e[0].replace(/\D/g,""),a=e[1],o=(Number(void 0!==a?t+"."+a:t),new Intl.NumberFormat("en-EN").format(t));o=void 0!==a?o+"."+a:o,$(this).val(o)}))})),$("#edit_product_price").keydown((function(e){setTimeout((()=>{let e=$(this).val().split("."),t=e[0].replace(/\D/g,""),a=e[1],o=(Number(void 0!==a?t+"."+a:t),new Intl.NumberFormat("en-EN").format(t));o=void 0!==a?o+"."+a:o,$(this).val(o)}))})),$("#URLFindCategory").keypress((function(){URLFindCategory=$(this).val()})).keypress(),$("#URL_List").keypress((function(){URL_List=$(this).val()})).keypress();var URLgetCategory="",URLgetType="";function GetList(e,t){$.ajax({url:URLProductList,data:{category_id:t,type_id:e}}).done((function(e){$("#dataContainer").html(e),$("#example").DataTable()})).fail((function(e,t,a){console.log(t),console.log(a),alert("Something Went Wrong, Try Later")}))}function EditStatus_comment(e,t){var a="";$("#URDEditStatus_Comment").keypress((function(){a=$(this).val()})).keypress();var o={};o.id=e,o.Status=t,$.ajax({url:a,data:JSON.stringify(o),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){sweetAlert({title:"Status update successful!",confirmButtonText:"OK",type:"success"}),$("#commentCount").parent().load("/Home/GetAdminSidebar #commentCount"),GetList_comment()}})}function GetOrder(e){console.log(e),$("#edit_idOrder").val(e),$("#DeleteOrder.close").css("display","none"),$("#DeleteOrder").modal("show")}function DeleteOrder(){var e="";$("#URDDeleteOrder").keypress((function(){e=$(this).val()})).keypress();var t={};t.id=$("#edit_idOrder").val(),t.Reason=$("#reason").val(),$.ajax({url:e,data:JSON.stringify(t),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){$("#DeleteOrder.close").css("display","none"),$("#DeleteOrder").modal("hide"),$(".modal ").insertAfter($("body")),sweetAlert({title:"Canceled order successfully!",confirmButtonText:"OK",type:"success"});var t=$("#filter_DateStart").val(),a=$("#filter_DateEnd").val();GetList_order(t,a)}})}function GetCmt(e,t){$("#edit_idComment").val(e),$("#edit_idProduct").val(t),$("#ReplyComment.close").css("display","none"),$("#ReplyComment").modal("show")}function Reply_comment(){var e="";$("#URDReplyComment").keypress((function(){e=$(this).val()})).keypress();var t={};t.Reply_coment=$("#edit_idComment").val(),t.Content=$("#replyComment").val(),t.ProductID=$("#edit_idProduct").val(),$.ajax({url:e,data:JSON.stringify(t),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){$("#ReplyComment.close").css("display","none"),$("#ReplyComment").modal("hide"),$(".modal ").insertAfter($("body")),sweetAlert({title:"Successful reply",confirmButtonText:"OK",type:"success"}),GetList_comment()}})}$("#URLgetCategory").keypress((function(){URLgetCategory=$(this).val()})).keypress(),$("#URLgetType").keypress((function(){URLgetType=$(this).val()})).keypress(),$.ajax({type:"GET",url:URLgetCategory,data:"{}",success:function(e){var t=$("#edit_Category_id").val();if(null!=t)var a='<option value="" disabled="disabled">Select product category</option>';else a='<option value="" disabled="disabled" selected="selected">Select product category</option>';for(var o=0;o<e.length;o++)t==e[o].categoryID?a+='<option value="'+e[o].categoryID+'" selected="selected">'+e[o].categoryName+"</option>":a+='<option value="'+e[o].categoryID+'">'+e[o].categoryName+"</option>";$("#CategoryDropdown").html(a)}}),$.ajax({type:"GET",url:URLgetType,data:"{}",success:function(e){var t=$("#edit_Type_id").val();if(null!=t)var a='<option value="" disabled="disabled">Select product type</option>';else a='<option value="" disabled="disabled" selected="selected">Select product type</option>';for(var o=0;o<e.length;o++)t==e[o].TypeID?a+='<option value="'+e[o].TypeID+'" selected="selected">'+e[o].TypeName+"</option>":a+='<option value="'+e[o].TypeID+'">'+e[o].TypeName+"</option>";$("#TypeDropdown").html(a)}}),$.ajax({type:"GET",url:URLgetCategory,data:"{}",success:function(e){for(var t='<option value="-1" >Select product category</option>',a=0;a<e.length;a++)t+='<option value="'+e[a].categoryID+'">'+e[a].categoryName+"</option>";$("#filter_Category").html(t)}}),$.ajax({type:"GET",url:URLgetType,data:"{}",success:function(e){for(var t='<option value="-1" >Select product type</option>',a=0;a<e.length;a++)t+='<option value="'+e[a].TypeID+'">'+e[a].TypeName+"</option>";$("#filter_Type").html(t)}}),$("#URLProductList").keypress((function(){URLProductList=$(this).val()})).keypress(),$("#filter_Category").change((function(){GetList($("#filter_Type").val(),$("#filter_Category").val())})),$("#filter_Type").change((function(){GetList($("#filter_Type").val(),$("#filter_Category").val())}));